<!doctype html>
<html>
    <head>
        <title>Online Mahjong</title>
        <link rel="stylesheet" href="main.css">
    </head>
    <body>
        <div id="app">
            <div v-if="!joined">
                <span>Username: </span>
                <input v-model="username">
                <button v-on:click="joinQueue()">Play Now</button>
            </div>
            <div id="main-game" v-if="joined">
                <span>Playing as: {{ username }} </span>
                <br>
                <span>{{ status }} <img v-if="activeTile"  v-bind:src="'res/' + activeTile + '.png'"></img></span>
                <h2>Other Players: </h2>
                <div id="other-player-section">
                    <div id="other-player-stub" v-for="player in players" v-bind:class="activePlayer(player)">
                        <span v-if="player.playerIdentifier == username">[You]</span><b>{{ player.playerIdentifier }}</b>
                        <span v-if="player.isActive"> [Playing]</span>
                        <span v-for="set in player.visibleTiles">
                            <img v-for="tile in set" v-bind:src="'res/' + tile + '.png'">
                        </span>
                    </div>
                </div>
                <h2>
                    Your Visible Tiles
                </h2>
                <div v-for="set in myVisibleTiles">
                    <img v-for="tile in set" v-bind:src="'res/' + tile + '.png'">
                </div>
                <h2>    
                    Your Hand
                </h2>
                <draggable v-model="myTiles" group="people" @start="drag=true" @end="drag=false">
                    <img v-for="tile in myTiles" v-bind:src="'res/' + tile + '.png'" v-on:click="clickTile(tile)">
                </draggable>
                <h2>
                    Actively Selected Tiles
                </h2>
                <img v-for="tile in activeTiles" v-bind:src="'res/' + tile + '.png'" v-on:click="deselectTile(tile)">
                <div v-if="inCheckPhase">
                    <button v-on:click="sendEvent('Win')">
                        Win (胡) literally win the game
                    </button>
                    <button v-on:click="sendEvent('Gang')">
                        Gang (杠) Four of a kind
                    </button>
                    <button v-on:click="sendEvent('Match')">
                        Match (碰) Three of a kind
                    </button>
                    <button v-on:click="sendEvent('Eat', activeTiles)">
                        Eat (吃) Straight (can only eat person directly upstream of you)
                    </button>
                    <button v-on:click="sendEvent('Pass')">
                        Pass (Do Nothing)
                    </button>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
        
        
        <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/vue/2.5.2/vue.min.js"></script> -->
        <!-- CDNJS :: Sortable (https://cdnjs.com/) -->
        <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.8.4/Sortable.min.js"></script>
        <!-- CDNJS :: Vue.Draggable (https://cdnjs.com/) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.24.3/vuedraggable.umd.min.js"></script>
        

        <script src="index.js"></script>
    </body>
</html>
